

<div class="modal-body">
  <b>Name:</b>
  <input type="text" name="name" class="form-control form-control-sm" [(ngModel)]="task.title" required />

  <b>Description:</b>
  <textarea name="description" class="form-control form-control-sm" [(ngModel)]="task.description"></textarea>

  <b>Type</b>
  <select class="form-control form-control-sm" [(ngModel)]="task.type">
    <option [value]="1">Task</option>
    <option [value]="2">Bug</option>
  </select>

  <b>CheckList</b>
  <hr />
  @if (hasSubTasks() && task.ready) {
    <div class="progress">
      <div class="progress-bar" role="progressbar" [style.width.%]="getCheckedPercentage()" aria-valuenow="getCheckedPercentage()" aria-valuemin="0" aria-valuemax="100">
        {{ getCheckedPercentage() }}%
      </div>
    </div>
  }
  @for(sub of task.subTasks; track $index; let i = $index) {
    <div class="d-flex">
      @if (task.ready && !sub.edit) {
        <input type="checkbox" [(ngModel)]="sub.checked" />
      }
      @if (sub.edit) {
        <input type="text" [(ngModel)]="sub.title" class="form-control form-control-sm w-auto" />
        <button class="btn btn-sm btn-success ml-2" (click)="sub.edit = false">
          <fa-icon [icon]="faCheck"></fa-icon>
        </button>
      } @else {
        <b class="p-1">{{sub.title}}</b>
        <button class="btn btn-sm btn-primary ml-2" (click)="sub.edit = true">
          <fa-icon [icon]="faPencil"></fa-icon>
        </button>
        <button class="btn btn-sm btn-danger ml-2" (click)="removeSubTask(i)">
          <fa-icon [icon]="faTrash"></fa-icon>
        </button>
      }
    </div>
  }
  <button class="btn btn-sm btn-primary mt-2" (click)="addSubTask()">
    <fa-icon [icon]="faPlus"></fa-icon> Add item
  </button>
</div>
<div class="modal-footer">
  <button type="submit" class="btn btn-outline-secondary" (click)="submitForm()">
    <fa-icon [icon]="faSave"></fa-icon> Save
  </button>
</div>
